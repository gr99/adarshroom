(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{bh5J:function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var r=o("XNiG"),n=o("fXoL"),i=o("tyNb"),c=o("tk/3");let s=(()=>{class t{constructor(t,e){this.router=t,this.http=e,this.room=[],this.roomUpdated=new r.a}getRooms(){return this.http.get("https://roomservers.herokuapp.com/Notification").subscribe(t=>{console.log("this is room",t),this.room=t.room,this.roomUpdated.next([...this.room])})}getRoomUpdateListner(){return this.roomUpdated.asObservable()}}return t.\u0275fac=function(e){return new(e||t)(n.Tb(i.a),n.Tb(c.b))},t.\u0275prov=n.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"ct+p":function(t,e,o){"use strict";o.r(e),o.d(e,"HomeModule",(function(){return N}));var r=o("ofXK"),n=o("tyNb"),i=o("3Pt+"),c=o("PSD3"),s=o.n(c),a=o("fXoL"),b=o("tk/3");let l=(()=>{class t{constructor(t){this.http=t}Room(t,e,o,r,n){console.log("this is the selected file",n);const i=new FormData;return i.append("roomNumber",t),i.append("Type",e),i.append("description",o),i.append("charges",r),i.append("image",n,n.name),console.log("this is description in upload service",o),this.http.post("http://metalmanauto.xyz:2078/addRoom",i)}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(b.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function u(t,e){if(1&t&&a.Nb(0,"img",19),2&t){const t=a.bc(2);a.gc("src",t.imageURL,a.mc)}}function d(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",2),a.Pb(1,"input",16,17),a.Xb("change",(function(){a.lc(t);const e=a.kc(2);return a.bc().preview(e.files)}))("change",(function(e){return a.lc(t),a.bc().onImagePicked(e)})),a.Ob(),a.qc(3,u,1,1,"img",18),a.Ob()}if(2&t){const t=a.bc();a.Bb(3),a.gc("ngIf",t.imageURL)}}let m=(()=>{class t{constructor(t,e){this.upload=t,this.router=e,this.selectedFile=null,this.description=null,this.charges=null,this.addImg=!1}ngOnInit(){this.form=new i.d({description:new i.c(null,{validators:[i.n.required]}),charges:new i.c(null,{validators:[i.n.required]}),image:new i.c(null,{validators:[i.n.required]})})}imageInput(){this.addImg=!0}preview(t){if(0!==t.length)if(null!=t[0].type.match(/image\/*/)){var e=new FileReader;this.imagePath=t,e.readAsDataURL(t[0]),e.onload=t=>{this.imageURL=e.result}}else this.message="Only images are supported."}onImagePicked(t){t.preventDefault(),this.selectedFile=t.target.files[0]}getSelected(t){this.selected=t.target.value}addRoom(t){t.preventDefault(),this.roomNumber=t.target.querySelector("#roomnumber").value,this.description=t.target.querySelector("#description").value,this.charges=t.target.querySelector("#charges").value,console.log("this is room",this.roomNumber),console.log("this is description from component",this.description),("image/jpeg"===this.selectedFile.type||"image/jpg"===this.selectedFile.type||"image/png"===this.selectedFile.type)&&this.selectedFile.size<=256e3?this.upload.Room(this.roomNumber,this.selected,this.description,this.charges,this.selectedFile).subscribe(t=>{console.log(t),"Room already exist"==t?(console.log("Fire this message"),s.a.fire({title:"Fail",text:"Room already exists",icon:"error",showConfirmButton:!1,timer:1900})):s.a.fire({title:"Success",text:"Room added Successfully",icon:"success",showConfirmButton:!1,timer:1100})}):s.a.fire({title:"Fail",text:"File extension not supported",icon:"error",showConfirmButton:!1,timer:1900}),this.router.navigateByUrl("Home/Notification")}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(l),a.Mb(n.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-addroom"]],decls:40,vars:1,consts:[[1,"room-container"],[3,"submit"],[1,"form-group"],["type","button",1,"btn","btn-primary",3,"click"],["class","form-group",4,"ngIf"],["for",""],[2,"font-size","medium"],["type","number","name","roomnumber","id","roomnumber"],["name","roomType",1,"form-group"],["type","radio","name","roomtype1","id","roomtype1","value","Luxory",3,"change"],["type","radio","name","roomtype1","id","roomtype1","value","Delux",3,"change"],["type","radio","name","roomtype1","id","roomtype2","value","SuperDelux",3,"change"],["name","description","id","description","placeholder","Enter Room description",1,"form-control",2,"width","700px","height","100px"],[1,"form-group","price"],["type","number","name","charges","id","charges","placeholder","Enter per day charges",1,"form-control"],["type","submit",1,"btn","btn-outline-danger","mt-1"],["type","file","enctype","multipart/form-data","name","image","id","image","accept",".png, .jpeg, .jpg",3,"change"],["file",""],["height","200","style","display: inline-block;",3,"src",4,"ngIf"],["height","200",2,"display","inline-block",3,"src"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Pb(1,"form",1),a.Xb("submit",(function(t){return e.addRoom(t)})),a.Pb(2,"div",2),a.Pb(3,"button",3),a.Xb("click",(function(){return e.imageInput()})),a.sc(4,"+ Add Image"),a.Ob(),a.Ob(),a.qc(5,d,4,1,"div",4),a.Pb(6,"div",2),a.Pb(7,"label",5),a.Pb(8,"b",6),a.sc(9,"Room Number"),a.Ob(),a.Ob(),a.sc(10,"\xa0\xa0\xa0 "),a.Nb(11,"input",7),a.Ob(),a.Pb(12,"div",8),a.Pb(13,"label",5),a.Pb(14,"b",6),a.sc(15,"Luxory"),a.Ob(),a.Ob(),a.sc(16,"\xa0"),a.Pb(17,"input",9),a.Xb("change",(function(t){return e.getSelected(t)})),a.Ob(),a.sc(18,"\xa0\xa0\xa0 "),a.Pb(19,"label",5),a.Pb(20,"b",6),a.sc(21,"Delux"),a.Ob(),a.Ob(),a.sc(22,"\xa0"),a.Pb(23,"input",10),a.Xb("change",(function(t){return e.getSelected(t)})),a.Ob(),a.sc(24,"\xa0\xa0\xa0 "),a.Pb(25,"label",5),a.Pb(26,"b",6),a.sc(27,"Super Delux"),a.Ob(),a.Ob(),a.sc(28,"\xa0"),a.Pb(29,"input",11),a.Xb("change",(function(t){return e.getSelected(t)})),a.Ob(),a.Ob(),a.Pb(30,"div",2),a.Nb(31,"textarea",12),a.Ob(),a.Pb(32,"div",13),a.Pb(33,"label",5),a.Pb(34,"b",6),a.sc(35,"Charges"),a.Ob(),a.Ob(),a.Nb(36,"input",14),a.Ob(),a.Pb(37,"div",2),a.Pb(38,"button",15),a.sc(39,"Add Room"),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&t&&(a.Bb(5),a.gc("ngIf",e.addImg))},directives:[i.o,i.i,i.j,r.k],styles:["input[type=number][_ngcontent-%COMP%]{width:13rem;border-radius:1%}input[type=number][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:2px solid #000}.room-container[_ngcontent-%COMP%]{padding:5%}#description[_ngcontent-%COMP%]{resize:none}.price[_ngcontent-%COMP%]{display:inline-table}"]}),t})(),p=(()=>{class t{constructor(t){this.http=t}getHistory(){return this.http.get("https://roomservers.herokuapp.com/History/history")}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(b.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),h=(()=>{class t{transform(t,e){return t&&e?t.filter(t=>t.Name.toLocaleLowerCase().includes(e.toLocaleLowerCase())):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Lb({name:"searchfilter",type:t,pure:!0}),t})();function g(t,e){1&t&&(a.Pb(0,"div",14),a.Pb(1,"label",15),a.sc(2,"Start Date"),a.Ob(),a.Pb(3,"div"),a.Nb(4,"input",16),a.Ob(),a.Pb(5,"label",17),a.sc(6,"End Date"),a.Ob(),a.Pb(7,"div"),a.Nb(8,"input",16),a.Ob(),a.Ob())}function f(t,e){if(1&t&&(a.Pb(0,"div",18),a.Pb(1,"div",19),a.Pb(2,"h2",20),a.sc(3),a.Ob(),a.Pb(4,"h3",21),a.Pb(5,"label",22),a.sc(6,"RoomNo."),a.Ob(),a.sc(7),a.Ob(),a.Pb(8,"h4",23),a.Pb(9,"label",22),a.Pb(10,"b"),a.sc(11,"Phone :"),a.Ob(),a.Ob(),a.sc(12),a.Ob(),a.Pb(13,"h4",23),a.Pb(14,"label",22),a.Pb(15,"b"),a.sc(16,"Document :"),a.Ob(),a.Ob(),a.sc(17),a.Ob(),a.Pb(18,"h4",23),a.Pb(19,"label",22),a.Pb(20,"b"),a.sc(21,"Document Number:"),a.Ob(),a.Ob(),a.sc(22),a.Ob(),a.Pb(23,"h4",23),a.Pb(24,"label",22),a.Pb(25,"b"),a.sc(26,"From:"),a.Ob(),a.Ob(),a.sc(27),a.cc(28,"date"),a.Pb(29,"label",22),a.Pb(30,"b"),a.sc(31,"To"),a.Ob(),a.Ob(),a.sc(32),a.cc(33,"date"),a.Ob(),a.Pb(34,"h4",23),a.Pb(35,"label",22),a.Pb(36,"b"),a.sc(37,"Charges:"),a.Ob(),a.Ob(),a.sc(38),a.Ob(),a.Ob(),a.Ob()),2&t){const t=e.$implicit;a.Bb(3),a.tc(t.Name),a.Bb(4),a.uc("\xa0\xa0 ",t.roomNumber,""),a.Bb(5),a.uc("\xa0\xa0",t.Phone,""),a.Bb(5),a.uc("\xa0\xa0",t.documentName,""),a.Bb(5),a.uc("\xa0\xa0",t.documentNumber,""),a.Bb(5),a.uc("\xa0\xa0",a.dc(28,8,t.startDate,"dd-MM-yyyy"),"\xa0\xa0\xa0"),a.Bb(5),a.uc("\xa0\xa0\xa0",a.dc(33,11,t.endDate,"dd-MM-yyyy"),""),a.Bb(6),a.uc("\xa0\xa0",t.Amount,"")}}let y=(()=>{class t{constructor(t,e){this.router=t,this.historyservice=e}ngOnInit(){this.historyservice.getHistory().subscribe(t=>{this.history=t.history,console.log(this.history)}),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}filter(t){this.filtervalue=t.target.value}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(n.a),a.Mb(p))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-history"]],decls:18,vars:6,consts:[[1,"History-container"],[1,"form-group","row"],[2,"margin-left","85%"],["type","radio","name","dateFilter","value","filter",3,"change"],["for","Date-filter"],["class","form-group date-filter",4,"ngIf"],[1,"form-group","row","search-container"],["for","search",1,"col-sm-2","col-form-label",2,"text-align","left","left","8rem","font-size","medium"],[1,"col-sm-6"],["type","text","id","search",1,"form-control","search",2,"align-content","center",3,"ngModel","ngModelChange"],[1,"rule",2,"width","70rem"],[1,"card-container"],[1,"row"],["class","card col-lg-12 Card",4,"ngFor","ngForOf"],[1,"form-group","date-filter"],["for","startDate"],["type","date"],["for","endDate",2,"padding-top","1%"],[1,"card","col-lg-12","Card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],["for",""],[1,"card-text"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Nb(1,"div",1),a.Pb(2,"div",2),a.Pb(3,"div"),a.Pb(4,"input",3),a.Xb("change",(function(t){return e.filter(t)})),a.Ob(),a.Pb(5,"label",4),a.sc(6,"Filter Date"),a.Ob(),a.Ob(),a.qc(7,g,9,0,"div",5),a.Ob(),a.Pb(8,"div",6),a.Pb(9,"label",7),a.sc(10,"Search"),a.Ob(),a.Pb(11,"div",8),a.Pb(12,"input",9),a.Xb("ngModelChange",(function(t){return e.searchValue=t})),a.Ob(),a.Ob(),a.Ob(),a.Nb(13,"hr",10),a.Pb(14,"div",11),a.Pb(15,"div",12),a.qc(16,f,39,14,"div",13),a.cc(17,"searchfilter"),a.Ob(),a.Ob(),a.Ob()),2&t&&(a.Bb(7),a.gc("ngIf","filter"==e.filtervalue),a.Bb(5),a.gc("ngModel",e.searchValue),a.Bb(4),a.gc("ngForOf",a.dc(17,3,e.history,e.searchValue)))},directives:[r.k,i.a,i.h,i.k,r.j],pipes:[h,r.d],styles:[".History-container[_ngcontent-%COMP%]{padding:2%}.Card[_ngcontent-%COMP%]{margin-bottom:1%;box-shadow:5px 5px 10px rgba(0,0,0,.3)}.rule[_ngcontent-%COMP%]{border-color:#000}.search-container[_ngcontent-%COMP%]{padding-left:5%}.search[_ngcontent-%COMP%]{border-color:navy}"]}),t})();var P=o("bh5J");let O=(()=>{class t{constructor(t,e){this.router=t,this.http=e}getVacantRooms(){return this.http.get("https://roomservers.herokuapp.com/Currentbookings/booked")}makeVacant(t){return console.log("this is id",t),this.http.post("https://roomservers.herokuapp.com/currentbookings/makevacant",{id:t})}changeStatus(t,e,o,r){return console.log("change status "+e+" of room no "+t),this.http.post("https://roomservers.herokuapp.com/addroom/changepaymentstatus",{id:t,paymentStatus:e,startDate:o,Name:r})}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(n.a),a.Tb(b.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function v(t,e){if(1&t){const t=a.Qb();a.Pb(0,"a",11),a.Xb("click",(function(){a.lc(t);const e=a.bc().$implicit;return a.bc().changeStatus(e.roomid,e.startDate,e.Name)})),a.sc(1,"PAY"),a.Ob()}}function w(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",3),a.Pb(1,"div",4),a.Pb(2,"h2",5),a.sc(3),a.Ob(),a.Pb(4,"h3",6),a.Pb(5,"label",7),a.Pb(6,"b"),a.sc(7,"RoomNo."),a.Ob(),a.Ob(),a.sc(8),a.Ob(),a.Pb(9,"p",8),a.Pb(10,"label",7),a.Pb(11,"b"),a.sc(12,"Phone :"),a.Ob(),a.Ob(),a.sc(13),a.Ob(),a.Pb(14,"p"),a.Pb(15,"label",7),a.Pb(16,"b"),a.sc(17,"Payment Status :"),a.Ob(),a.Ob(),a.sc(18),a.Ob(),a.Pb(19,"p",8),a.Pb(20,"label",7),a.Pb(21,"b"),a.sc(22,"start Date:"),a.Ob(),a.Ob(),a.sc(23),a.cc(24,"date"),a.Pb(25,"label",7),a.Pb(26,"b"),a.sc(27,"end Date:"),a.Ob(),a.Ob(),a.sc(28),a.cc(29,"date"),a.Ob(),a.Pb(30,"a",9),a.Xb("click",(function(){a.lc(t);const o=e.$implicit;return a.bc().makevacant(o.roomid)})),a.sc(31,"Vacant"),a.Ob(),a.qc(32,v,2,0,"a",10),a.Ob(),a.Ob()}if(2&t){const t=e.$implicit;a.Bb(3),a.tc(t.Name),a.Bb(5),a.uc("\xa0\xa0 ",t.roomNumber,""),a.Bb(5),a.uc("\xa0\xa0",t.Phone,""),a.Bb(5),a.uc("\xa0\xa0",t.paymentStatus,"\xa0\xa0 "),a.Bb(5),a.uc("\xa0\xa0",a.dc(24,7,t.startDate,"dd-MM-yyyy"),"\xa0\xa0To \xa0\xa0 "),a.Bb(5),a.uc("\xa0\xa0",a.dc(29,10,t.endDate,"dd-MM-yyyy")," "),a.Bb(4),a.gc("ngIf","Done"!=t.paymentStatus)}}const k=[{path:"Notification",loadChildren:()=>o.e(6).then(o.bind(null,"wQq9")).then(t=>t.NotificationModule)},{path:"addRoom",component:m},{path:"History",component:y},{path:"Currentbookings",component:(()=>{class t{constructor(t,e,o,r){this.router=t,this.getroom=e,this.vacant=o,this.fb=r,this.City=["PAYMENT_PENDING","PAYMENT_SUCCESFUL"],this.vacantrooms=[]}ngOnInit(){this.registrationForm=new i.d({cityName:new i.c}),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.vacant.getVacantRooms().subscribe(t=>{this.vacantrooms=t.vacantroom,console.log("this is vACANT room",this.vacantrooms),console.log("this is also vacant room",this.vacantrooms.vacantroom)})}makevacant(t){console.log("this is room id in front end",t),this.vacant.makeVacant(t).subscribe(),s.a.fire({title:"Make Room Vacant",text:"This will make this room vacant for further bookings. Are you sure you want to continue?",icon:"question"}),this.router.navigate(["Home/Notification"],{queryParams:{pgId:"Aq198"}})}changeStatus(t,e,o){this.payment="Done",this.vacant.changeStatus(t.toString(),this.payment,e,o).subscribe(t=>{if(console.log(t.msg),"Status update succesfully"==t.msg){const t=document.querySelector("#paymentBtn");t.classList.remove("btn-danger"),t.classList.add("btn-success"),t.innerText="Paid",t.disabled=!0,s.a.fire({title:"Success",text:"Status update succesfully",icon:"success",showConfirmButton:!1,timer:1100}),this.router.navigateByUrl("Home/Notification")}else s.a.fire({title:"Fail",text:"Unable to update",icon:"error",showConfirmButton:!1,timer:1900})})}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(n.a),a.Mb(P.a),a.Mb(O),a.Mb(i.b))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-currentbookings"]],decls:3,vars:2,consts:[[1,"card-container"],[1,"row",3,"formGroup"],["class","card col-lg-12",4,"ngFor","ngForOf"],[1,"card","col-lg-12"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],["for",""],[1,"card-text"],[1,"btn","btn-success",2,"position","absolute","bottom","8px","right","1rem",3,"click"],["class","btn btn-danger","id","paymentBtn","style","position: absolute; bottom: 8px; left: 1rem;",3,"click",4,"ngIf"],["id","paymentBtn",1,"btn","btn-danger",2,"position","absolute","bottom","8px","left","1rem",3,"click"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.qc(2,w,33,13,"div",2),a.Ob(),a.Ob()),2&t&&(a.Bb(1),a.gc("formGroup",e.registrationForm),a.Bb(1),a.gc("ngForOf",e.vacantrooms))},directives:[i.i,i.e,r.j,r.k],pipes:[r.d],styles:[".card-container[_ngcontent-%COMP%]{padding:3%}.card[_ngcontent-%COMP%]{padding:2%;margin-bottom:1%;box-shadow:5px 5px 10px rgba(0,0,0,.3)}"]}),t})()}];let x=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[n.c.forChild(k),i.l,i.f],n.c]}),t})(),N=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[r.b,x,i.f,i.l]]}),t})()}}]);